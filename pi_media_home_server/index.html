<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This is a repo I built for me in order to make my life easier around managing some linux personal projects.t."><meta name=author content="George Mihaila"><link href=https://gmihaila.github.io/linux_things/pi_media_home_server/ rel=canonical><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.9"><title>Media Home Server - My Linux Related Projects</title><link rel=stylesheet href=../assets/stylesheets/main.2b4465f4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=black> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#media-home-server class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="My Linux Related Projects" class="md-header__button md-logo" aria-label="My Linux Related Projects" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path fill-rule=evenodd d="M8.75 8a.75.75 0 0 0-.75.75v6.5c0 .414.336.75.75.75h6.5a.75.75 0 0 0 .75-.75v-6.5a.75.75 0 0 0-.75-.75h-6.5zm.75 6.5v-5h5v5h-5z"/><path fill-rule=evenodd d="M15.25 1a.75.75 0 0 1 .75.75V4h2.25c.966 0 1.75.784 1.75 1.75V8h2.25a.75.75 0 0 1 0 1.5H20v5h2.25a.75.75 0 0 1 0 1.5H20v2.25A1.75 1.75 0 0 1 18.25 20H16v2.25a.75.75 0 0 1-1.5 0V20h-5v2.25a.75.75 0 0 1-1.5 0V20H5.75A1.75 1.75 0 0 1 4 18.25V16H1.75a.75.75 0 0 1 0-1.5H4v-5H1.75a.75.75 0 0 1 0-1.5H4V5.75C4 4.784 4.784 4 5.75 4H8V1.75a.75.75 0 0 1 1.5 0V4h5V1.75a.75.75 0 0 1 .75-.75zm3 17.5a.25.25 0 0 0 .25-.25V5.75a.25.25 0 0 0-.25-.25H5.75a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> My Linux Related Projects </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Media Home Server </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/gmihaila/linux_things/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> gmihaila/linux_things </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="My Linux Related Projects" class="md-nav__button md-logo" aria-label="My Linux Related Projects" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path fill-rule=evenodd d="M8.75 8a.75.75 0 0 0-.75.75v6.5c0 .414.336.75.75.75h6.5a.75.75 0 0 0 .75-.75v-6.5a.75.75 0 0 0-.75-.75h-6.5zm.75 6.5v-5h5v5h-5z"/><path fill-rule=evenodd d="M15.25 1a.75.75 0 0 1 .75.75V4h2.25c.966 0 1.75.784 1.75 1.75V8h2.25a.75.75 0 0 1 0 1.5H20v5h2.25a.75.75 0 0 1 0 1.5H20v2.25A1.75 1.75 0 0 1 18.25 20H16v2.25a.75.75 0 0 1-1.5 0V20h-5v2.25a.75.75 0 0 1-1.5 0V20H5.75A1.75 1.75 0 0 1 4 18.25V16H1.75a.75.75 0 0 1 0-1.5H4v-5H1.75a.75.75 0 0 1 0-1.5H4V5.75C4 4.784 4.784 4 5.75 4H8V1.75a.75.75 0 0 1 1.5 0V4h5V1.75a.75.75 0 0 1 .75-.75zm3 17.5a.25.25 0 0 0 .25-.25V5.75a.25.25 0 0 0-.25-.25H5.75a.25.25 0 0 0-.25.25v12.5c0 .138.112.25.25.25h12.5z"/></svg> </a> My Linux Related Projects </label> <div class=md-nav__source> <a href=https://github.com/gmihaila/linux_things/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> gmihaila/linux_things </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2> Raspberry <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Raspberry data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Raspberry </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Media Home Server <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Media Home Server </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#setup-pi4 class=md-nav__link> Setup Pi4 </a> </li> <li class=md-nav__item> <a href=#install-updates class=md-nav__link> Install updates </a> </li> <li class=md-nav__item> <a href=#install-vim class=md-nav__link> Install Vim </a> </li> <li class=md-nav__item> <a href=#setup-static-ip class=md-nav__link> Setup Static IP </a> </li> <li class=md-nav__item> <a href=#setup-external-hard-drive class=md-nav__link> Setup External Hard-Drive </a> </li> <li class=md-nav__item> <a href=#install-transmission class=md-nav__link> Install Transmission </a> </li> <li class=md-nav__item> <a href=#install-plex class=md-nav__link> Install Plex </a> </li> <li class=md-nav__item> <a href=#update-plex class=md-nav__link> Update Plex </a> </li> <li class=md-nav__item> <a href=#fix-disk-issues-with-fsck class=md-nav__link> Fix disk issues with fsck </a> </li> <li class=md-nav__item> <a href=#add-exfat-support class=md-nav__link> Add exFat support </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#setup-pi4 class=md-nav__link> Setup Pi4 </a> </li> <li class=md-nav__item> <a href=#install-updates class=md-nav__link> Install updates </a> </li> <li class=md-nav__item> <a href=#install-vim class=md-nav__link> Install Vim </a> </li> <li class=md-nav__item> <a href=#setup-static-ip class=md-nav__link> Setup Static IP </a> </li> <li class=md-nav__item> <a href=#setup-external-hard-drive class=md-nav__link> Setup External Hard-Drive </a> </li> <li class=md-nav__item> <a href=#install-transmission class=md-nav__link> Install Transmission </a> </li> <li class=md-nav__item> <a href=#install-plex class=md-nav__link> Install Plex </a> </li> <li class=md-nav__item> <a href=#update-plex class=md-nav__link> Update Plex </a> </li> <li class=md-nav__item> <a href=#fix-disk-issues-with-fsck class=md-nav__link> Fix disk issues with fsck </a> </li> <li class=md-nav__item> <a href=#add-exfat-support class=md-nav__link> Add exFat support </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/gmihaila/linux_things/tree/master/docs/src/markdown/pi_media_home_server.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=media-home-server>Media Home Server<a class=headerlink href=#media-home-server title="Permanent link">&para;</a></h1> <p>Plex Server: <a href=192.168.50.11:32400/web>192.168.50.11:32400/web</a></p> <p>Transmission Server: <a href=http://192.168.50.11:9091>http://192.168.50.11:9091</a></p> <p>The plan is to have a Netflix-like local server that runs on a Raspberry pi.</p> <p>My hardware setup is:</p> <ul> <li> <p>Raspberry Pi 4</p> </li> <li> <p>SSD Sata Drive</p> </li> <li> <p>Sata Drive adaptor with external power source (very important to have external power source. It took me a lot of formatting to find out that the pi is not powerful enough to hold an external hard-drive).</p> </li> </ul> <p>The software setup is:</p> <ul> <li> <p>Transmission: to handle anything I want to download on my pi. It has a nice web ui that I can use form my personal laptop.</p> </li> <li> <p>Plex: this is our media server. It will stream everything that it finds on the external SSD hard-drive.</p> </li> </ul> <h2 id=setup-pi4>Setup Pi4<a class=headerlink href=#setup-pi4 title="Permanent link">&para;</a></h2> <ul> <li>Manually download OS image from <a href=https://www.raspberrypi.org/software/operating-systems/ >here</a></li> <li>Flash micro SD card with OS image. I'm using <a href=https://www.balena.io/etcher/ >balena etcher</a></li> <li>Make sure to add <code>ssh</code> empty file to micro SD card after OS image is flashed. This allows headless connections.</li> <li>Connect Pi4 to router with ethernet cable. Power it on. Check router for IP address in order to connect.</li> </ul> <p><em>Note:</em> If need to change ssh key: <code>ssh-keygen -R 192.168.0.11</code></p> <h2 id=install-updates>Install updates<a class=headerlink href=#install-updates title="Permanent link">&para;</a></h2> <p>Always good to keep all up to date:</p> <div class=highlight><pre><span></span><code>sudo apt-get update <span class=o>&amp;&amp;</span> sudo apt-get upgrade -y <span class=o>&amp;&amp;</span> sudo apt-get dist-upgrade -y
sudo apt autoremove -y
</code></pre></div> <h2 id=install-vim>Install Vim<a class=headerlink href=#install-vim title="Permanent link">&para;</a></h2> <p>I use vim:</p> <div class=highlight><pre><span></span><code>sudo apt-get install vim -y
</code></pre></div> <h2 id=setup-static-ip>Setup Static IP<a class=headerlink href=#setup-static-ip title="Permanent link">&para;</a></h2> <p>Need to have a static IP in case the PI or router needs to restart:</p> <div class=highlight><pre><span></span><code>sudo vim /etc/dhcpcd.conf
</code></pre></div> <p>And enter the following at the end of the file: </p> <div class=highlight><pre><span></span><code><span class=c1>#setting static ip address for raspberry pi 4</span>
static <span class=nv>ip_address</span><span class=o>=</span><span class=m>192</span>.168.50.11/24
static <span class=nv>routers</span><span class=o>=</span><span class=m>192</span>.168.50.1
static <span class=nv>domain_name_servers</span><span class=o>=</span><span class=m>192</span>.168.50.1
</code></pre></div> <p>Reboot PI:</p> <div class=highlight><pre><span></span><code>sudo reboot
</code></pre></div> <h2 id=setup-external-hard-drive>Setup External Hard-Drive<a class=headerlink href=#setup-external-hard-drive title="Permanent link">&para;</a></h2> <p>Format drive:</p> <div class=highlight><pre><span></span><code>lsblk -f
sudo umount /dev/sda2
sudo mkfs -t ext4 /dev/sda2
</code></pre></div> <p>Install ntfs package:</p> <div class=highlight><pre><span></span><code>sudo apt-get install ntfs-3g
</code></pre></div> <p>Install Exfat Package:</p> <div class=highlight><pre><span></span><code>sudo apt-get install exfat-utils exfat-fuse
</code></pre></div> <p>Create storage directory:</p> <div class=highlight><pre><span></span><code>sudo mkdir -p /Media
</code></pre></div> <p>And change ownsership</p> <div class=highlight><pre><span></span><code>sudo chown -R pi:pi /Media
</code></pre></div> <p>See mounting points:</p> <div class=highlight><pre><span></span><code>lsblk
</code></pre></div> <p>Mount Drive:</p> <div class=highlight><pre><span></span><code>sudo mount /dev/sda2 /Media
</code></pre></div> <p>Create folders:</p> <div class=highlight><pre><span></span><code>sudo mkdir -p /Media/Movies
sudo mkdir -p /Media/Music
sudo mkdir -p /Media/TV<span class=se>\ </span>Shows
sudo mkdir -p /Media/in_progress
</code></pre></div> <div class=highlight><pre><span></span><code>sudo chown -R pi:pi /Media/Movies
sudo chown -R pi:pi /Media/TV<span class=se>\ </span>Shows
sudo chown -R pi:pi /Media/in_progress
</code></pre></div> <p>Keep drive mounted (automount) even when PI restarts:</p> <div class=highlight><pre><span></span><code>sudo vim /etc/fstab
</code></pre></div> <p>And enter the following at the end of the file: Recommended by fstab is to use UUID. UUID format is: <code>UUID=&lt;uuid-of-your-drive&gt; &lt;mount-point&gt; &lt;file-system-type&gt; &lt;mount-option&gt; &lt;dump&gt; &lt;pass&gt;</code>. Use <code>sudo blkid</code> to find <uuid-of-your-drive> and test it out with <code>sudo mount -a</code> My command will be:</p> <p><div class=highlight><pre><span></span><code><span class=nv>UUID</span><span class=o>=</span>7690cbc8-a262-40ba-a860-c47d499304c7 /Media ext4 defaults,auto,users,rw,nofail <span class=m>0</span> <span class=m>0</span>
</code></pre></div> What I used before and it worked but it's not recommended: <code>/dev/sda2 /Media ext4 defaults,user 0 0</code></p> <p>Reboot PI:</p> <div class=highlight><pre><span></span><code>sudo reboot
</code></pre></div> <h2 id=install-transmission>Install Transmission<a class=headerlink href=#install-transmission title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>sudo apt install transmission-daemon -y
</code></pre></div> <p>Stop transmission, so we can do some configuration:</p> <div class=highlight><pre><span></span><code>sudo systemctl stop transmission-daemon
</code></pre></div> <p>Add settings:</p> <div class=highlight><pre><span></span><code>sudo vim /etc/transmission-daemon/settings.json
</code></pre></div> <p>And enter the following at the end of the file:</p> <div class=highlight><pre><span></span><code><span class=s2>&quot;incomplete-dir&quot;</span>: <span class=s2>&quot;/Media/in_progress&quot;</span>,
<span class=s2>&quot;download-dir&quot;</span>: <span class=s2>&quot;/Media/Movies&quot;</span>,
<span class=s2>&quot;incomplete-dir-enabled&quot;</span>: true,
<span class=s2>&quot;rpc-password&quot;</span>: <span class=s2>&quot;my-pass&quot;</span>,
<span class=s2>&quot;rpc-username&quot;</span>: <span class=s2>&quot;pi&quot;</span>,
<span class=s2>&quot;rpc-whitelist&quot;</span>: <span class=s2>&quot;192.168.*.*&quot;</span>,
</code></pre></div> <p>Change default user:</p> <div class=highlight><pre><span></span><code>sudo vim /etc/init.d/transmission-daemon
</code></pre></div> <p>Make sure that:</p> <div class=highlight><pre><span></span><code><span class=nv>USER</span><span class=o>=</span>pi
</code></pre></div> <p>Edit service file:</p> <div class=highlight><pre><span></span><code>sudo vim /etc/systemd/system/multi-user.target.wants/transmission-daemon.service
</code></pre></div> <p>Make sure that:</p> <div class=highlight><pre><span></span><code><span class=nv>User</span><span class=o>=</span>pi
</code></pre></div> <p>Reload transmission:</p> <div class=highlight><pre><span></span><code>sudo systemctl daemon-reload
</code></pre></div> <p>Change ownershitp of some files into our permissions scope:</p> <div class=highlight><pre><span></span><code>sudo chown -R pi:pi /etc/transmission-daemon
sudo chown -R pi:pi /etc/init.d/transmission-daemon
sudo chown -R pi:pi /var/lib/transmission-daemon
</code></pre></div> <p>Other configurations:</p> <div class=highlight><pre><span></span><code>sudo chown -R pi:pi /etc/transmission-daemon
sudo mkdir -p /home/pi/.config/transmission-daemon/
sudo ln -s /etc/transmission-daemon/settings.json /home/pi/.config/transmission-daemon/
sudo chown -R pi:pi /home/pi/.config/transmission-daemon/
</code></pre></div> <p>Start transmission:</p> <div class=highlight><pre><span></span><code>sudo systemctl start transmission-daemon
</code></pre></div> <p>Check status make sure everything is running smooth:</p> <div class=highlight><pre><span></span><code>systemctl status transmission-daemon.service
</code></pre></div> <p>Transmission available at <code>http://192.168.50.11:9091</code>.</p> <p>Reboot PI:</p> <div class=highlight><pre><span></span><code>sudo reboot
</code></pre></div> <h2 id=install-plex>Install Plex<a class=headerlink href=#install-plex title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>sudo apt-get update <span class=o>&amp;&amp;</span> sudo apt-get upgrade <span class=o>&amp;&amp;</span> sudo apt-get dist-upgrade -y
sudo apt autoremove -y
</code></pre></div> <p>Add the official Plex package repository:</p> <div class=highlight><pre><span></span><code>sudo apt-get install apt-transport-https
</code></pre></div> <p>Add the Plex repositories to the “apt” package managers key list:</p> <div class=highlight><pre><span></span><code>curl https://downloads.plex.tv/plex-keys/PlexSign.key <span class=p>|</span> sudo apt-key add -
</code></pre></div> <p>Add the official plex repository to the sources list by running the following command:</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span> deb https://downloads.plex.tv/repo/deb public main <span class=p>|</span> sudo tee /etc/apt/sources.list.d/plexmediaserver.list
</code></pre></div> <p>Run the “update” command again to refresh the package list:</p> <div class=highlight><pre><span></span><code>sudo apt-get update
</code></pre></div> <p>Install the Plex Media server package to the Pi:</p> <div class=highlight><pre><span></span><code>sudo apt install plexmediaserver
</code></pre></div> <p>Plex available at <code>http://192.168.50.11:32400/web/</code>.</p> <p>The scanners and metadata agents used by Plex will work best when your major types of content are separated from each other. We strongly recommend separating movie and television content into separate main directories. For instance, you might use something like this:</p> <div class=highlight><pre><span></span><code>/Media
   /Movies
      movie content
   /Music
      music content
   /TV Shows
      television content
</code></pre></div> <p>TV Shows should have the following structure for first episode in first season naming (added example if there are two episodes in one):</p> <div class=highlight><pre><span></span><code>/TV Shows
  /My Show
    /Season <span class=m>01</span>
      My Show - s01e01.format
      My Show - s01e02-03.format     
</code></pre></div> <p>Reboot PI:</p> <div class=highlight><pre><span></span><code>sudo reboot
</code></pre></div> <h2 id=update-plex>Update Plex<a class=headerlink href=#update-plex title="Permanent link">&para;</a></h2> <p>Download the <code>*.deb</code> file on the pi and install updates. For example if we have the <code>plexmediaserver_1.22.1.4275-48e10484b_armhf.deb</code>:</p> <div class=highlight><pre><span></span><code>sudo dpkg -i plexmediaserver_1.22.1.4275-48e10484b_armhf.deb
</code></pre></div> <h2 id=fix-disk-issues-with-fsck>Fix disk issues with <code>fsck</code><a class=headerlink href=#fix-disk-issues-with-fsck title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code>sudo fsck -f -y /dev/sda2
</code></pre></div> <h2 id=add-exfat-support>Add exFat support<a class=headerlink href=#add-exfat-support title="Permanent link">&para;</a></h2> <p>Inspired from <a href=https://pimylifeup.com/raspberry-pi-exfat/ >here</a>.</p> <p>Exfat-fuse works as a module to FUSE (Filesystem in Userspace) software system that allows the Raspbian operating system to mount and interpret exFAT drives without requiring extra privileges.</p> <p>Exfat-utils provides all the utilities that you need to be able to deal with the exFAT format, including the ability to format drives on your Linux devices.</p> <div class=highlight><pre><span></span><code>sudo apt-get install exfat-fuse
sudo apt-get install exfat-utils
</code></pre></div> <p>Mounting an exFAT Drive Manually from Terminal</p> <div class=highlight><pre><span></span><code>sudo mount -o ro,noload -t exfat /dev/sda2 /Media
</code></pre></div> <p>Automatically mounted at boot read only (find UUID using <code>sudo blkid</code>):</p> <div class=highlight><pre><span></span><code>/dev/sda2 /Media exfat defaults,auto,umask<span class=o>=</span><span class=m>000</span>,users,ro,noload <span class=m>0</span> <span class=m>0</span>
</code></pre></div> <p>/dev/disk/by-uuid/68271755-703c-48e6-a935-c1237de6b1a8 /mnt/HDD01 auto ro,nosuid,nodev,nofail,x-gvfs-show 0 0</p> <p>Formatting a Drive as exFAT:</p> <div class=highlight><pre><span></span><code>mkfs.exfat /dev/sda2
</code></pre></div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=.. class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Home </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2015 - 2021 <a href=https://github.com/gmihaila target=_blank rel=noopener>George Mihaila</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/gmihaila target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["instant", "header.autohide", "search.highlight", "search.share", "search.suggest", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.22074ed6.min.js"}</script> <script src=../assets/javascripts/bundle.960e086b.min.js></script> </body> </html>